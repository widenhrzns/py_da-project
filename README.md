# Анализ влияния ипотечных ставок на цены недвижимости в России

### !!!! СДВИНУЛИ ДД НА 1 ДЕНЬ !!!!

## Группа

`Николюк Татьяна`

`Жильцов Иван`

## Быстрый старт

Настройка окружения
`pip install -r requirements.txt`

## Структура проекта

```
/housing-prices-mortgage-rates
│
├── /data
|   ├── /excel                                 # В ручную скачанные эксель таблицы
|   └── /csv                                   # Итоговые датасеты для анализа
│
├── /notebooks
│   ├── data_collection.ipynb    # Сбор датасета и предварительная обработка данных
│   ├── data_parsing.ipynb       # Парсинг эксель таблиц с сайта ЦБ.РФ
|   ├── data_preprocessing.ipynb # Предварительная обработка данных и описание признаков
│   └── main.ipynb               # Основной ноутбук с исследованием
│
├── .gitignore
├── README.md
└── requirements.txt             # Список используемых пакетов
```

## Шаг 1: выбор темы

Исследование зависимости между ставками по ипотеке и ценами на недвижимость по регионам.

> Основной фокус будет на крупные города.

### Почему выбрана эта тема

Главная цель любого человека - обрести свой дом. В России же основным инструментом достижения этой цели является ипотека, поэтому изменение ипотечных ставок напрямую влияет на спрос и предложение на рынке недвижимости, а в последние годы, из-за резких изменений ключа, гос программ по субсидированию ипотеки и тд, наблюдаются значительные колебания ипотечных ставок, что делает исследование чуть интересней -\_-

### Предварительные данные для работы

- ЦБ РФ (https://cbr.ru/) - ключевая ставка и ипотечные ставки
- Росстат (https://rosstat.gov.ru/) - цены на недвижимость по регионам, уровень инфляции или средние доходы населения
- Порталы недвижимости (ЦИАН, Avito, Яндекс.Недвижимость) - актуальные данные о ценах на жилье
- Kaggle (https://www.kaggle.com/datasets) - дополнительные датасеты (если потребуется). _Например, https://www.kaggle.com/datasets/mrdaniilak/russia-real-estate-2021 (Недвижимость в России 2021)_

## Шаг 2: Сбор данных

Представлена в data_collection.ipynb

На этом шаге собираются необходимые данные для анализа:

- Данные по ипотечным ставкам — информация о ставках ЦБ РФ и процентных ставках по ипотечным кредитам в разных регионах за 2013-2024 годы.
- Данные по ценам на недвижимость — данные о ценах на жилье за квадратный метр и изменении цен по регионам с 2014 по 2024 годы.
- Макроэкономические данные — информация об инфляции, доходах населения и курсе доллара за тот же период.

Эти данные собираются из официальных источников, таких как ЦБ РФ, Росстат

По итогу этого шага данные представлены в housing_prices_mortgage_rates_1.csv

## Шаг 3: Предварительная обработка данных

Представлена в data_collection.ipynb и data_preprocessing.ipynb

**data_collection.ipynb**

- заполнение NaN значений
- коррекция форматов данных
- удаление дубликатов в названиях регионов

**data_preprocessing.ipynb**

- заполнение NaN значений
- удаление дубликатов
- округление до двух знаков после запятой
- описание признаков

По итогу этого шага данные представлены в housing_prices_mortgage_rates.csv

## Шаг 4: EDA

Представлено в main.ipynb **ВМЕСТЕ С ВИЗУАЛИЗАЦИЕЙ**

Рассмотрены:

- типы распределений признаков
- анализ зависимостей

**Итог**:

- **Правосторонняя асимметрия**: Большинство признаков (`key_rate`, `us_rate`, `inflation`, `price`, `income`) имеют правостороннюю асимметрию, что указывает на наличие выбросов в сторону более высоких значений.
- **Близкое к нормальному**: Признаки `avg_rate`, `weight_avg_rate` и `index` имеют распределение, близкое к нормальному, с небольшим смещением вправо.
- **Выбросы**: В данных присутствуют выбросы, особенно в признаках `price` и `income`, что может потребовать дополнительного анализа или обработки.

## Шаг 5: Создание новых признаков

- С помощью библиотеки tsfresh был выполнен анализ файла на наличие признаков, также был выполнен ручной анализ, однако ничего из этого не дало результатов

## Шаг 6: Гипотезы

1. **Влияние ключевой ставки на ипотечные ставки:**

   - **H1:** Увеличение ключевой ставки приводит к росту средних и средневзвешенных ипотечных ставок в регионах России.

2. **Влияние ипотечных ставок на стоимость недвижимости:**

   - **H2:** Рост ипотечных ставок снижает доступность кредитов, что приводит к снижению спроса на недвижимость и, как следствие, к снижению цен на жилье.

3. **Влияние доходов населения на стоимость недвижимости:**

   - **H3:** Рост доходов населения в регионе положительно коррелирует с увеличением стоимости недвижимости, так как повышается покупательная способность.

4. **Региональные различия:**

   - **H4:** Влияние ключевой ставки и ипотечных ставок на стоимость недвижимости варьируется в зависимости от региона, причем в более экономически развитых регионах это влияние сильнее.

5. **Влияние инфляции на стоимость недвижимости:**

   - **H5:** Высокий уровень инфляции приводит к увеличению стоимости недвижимости, так как инвесторы рассматривают недвижимость как защитный актив от инфляции.

## Шаг 7: Машинное обучение

- Для машинного обучения была создана модель на базе RandomForest и выбрана метрика r2_score, наиболее эффективно описывающая эффективность такой модели. Решено было предсказывать, в зависимости от всех выделенных признаков, цену на недвижимость. Весь код в ноутбуке main.

## Вывод

В ходе работы мы собрали датасет, подготовили и очистили его для последующего анализа. Проанализировали признаки и выявили несколько новых, а также выдвинули гипотезы, которые, к сожалению, не смогли протестировать. Обучили модель, разбив наши данные на тестовые и валидационные, и она показала отличные результаты.
